<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-23490db3-69d0-425c-b0c5-967a30a5d45b"></attachment><p class="ql-align-justify"><strong style="color: rgb(62, 62, 62);">redis 的基本操作方法</strong></p><p class="ql-align-justify"><strong>1.redis 的连接 ：</strong></p><p><code>//实例化redis</code></p><p><code>$redis</code>&nbsp;<code>=&nbsp;new</code>&nbsp;<code>Redis();</code></p><p><code>//连接</code></p><p><code>&nbsp;$redis-&gt;connect('127.0.0.1', 6379);</code></p><p><code>//检测是否连接成功</code></p><p><code>echo</code>&nbsp;<code>"Server is running: "</code>&nbsp;<code>.&nbsp;$redis-&gt;ping();</code></p><p><code>// 输出结果 Server is running: +PONG</code></p><p class="ql-align-justify"><strong>2.redis 操作 Strng (字符串):</strong></p><p><code>// 设置一个字符串的值</code></p><p><code>$redis-&gt;set('cat', 111);</code></p><p><code>//获取一个字符串的值</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;get('cat');&nbsp;// 111</code></p><p><code>// 重复set</code></p><p><code>$redis-&gt;set('cat', 222);</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;get('cat');&nbsp;// 222</code></p><p class="ql-align-justify"><strong>3.redis 操作 List (列表):</strong></p><p><code>&nbsp;//存储数据到列表中</code></p><p><code>$redis-&gt;lpush('list',&nbsp;'html');</code></p><p><code>$redis-&gt;lpush('list',&nbsp;'css');</code></p><p><code>$redis-&gt;lpush('list',&nbsp;'php');</code></p><p><code>//获取列表中所有的值</code></p><p><code>$list</code>&nbsp;<code>=&nbsp;$redis-&gt;lrange('list', 0, -1);</code></p><p><code>print_r($list);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; php [1] =&gt; css [2] =&gt; html )</code></p><p><code>//从右侧加入一个</code></p><p><code>$redis-&gt;rpush('list',&nbsp;'mysql');</code></p><p><code>$list</code>&nbsp;<code>=&nbsp;$redis-&gt;lrange('list', 0, -1);</code></p><p><code>print_r($list);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; php [1] =&gt; css [2] =&gt; html [3] =&gt; mysql )</code></p><p><code>//从左侧弹出一个</code></p><p><code>$redis-&gt;lpop('list');</code></p><p><code>$list</code>&nbsp;<code>=&nbsp;$redis-&gt;lrange('list', 0, -1);</code></p><p><code>print_r($list);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; css [1] =&gt; html [2] =&gt; mysql )</code></p><p><code>//从右侧弹出一个</code></p><p><code>$redis-&gt;rpop('list');</code></p><p><code>$list</code>&nbsp;<code>=&nbsp;$redis-&gt;lrange('list', 0, -1);</code></p><p><code>print_r($list);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; css [1] =&gt; html )</code></p><p class="ql-align-justify"><strong>4.redis 操作 Hash (字典):</strong></p><p><code>&lt;?php</code></p><p><code>//实例化redis</code></p><p><code>$redis</code>&nbsp;<code>=&nbsp;new</code>&nbsp;<code>Redis();</code></p><p><code>//连接</code></p><p><code>$redis-&gt;connect('127.0.0.1', 6379);</code></p><p><code>//字典</code></p><p><code>//给hash表中某个key设置value</code></p><p><code>//如果没有则设置成功,返回1,如果存在会替换原有的值,返回0,失败返回0</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'cat',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'cat',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 0</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'cat',&nbsp;'cat1');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 0</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'dog',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'bird',&nbsp;'bird');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hset('hash',&nbsp;'monkey',&nbsp;'monkey');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>//获取hash中某个key的值</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hget('hash',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;// cat1</code></p><p><code>//获取hash中所有的keys</code></p><p><code>$arr</code>&nbsp;<code>=&nbsp;$redis-&gt;hkeys('hash');</code></p><p><code>print_r($arr);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; cat [1] =&gt; dog [2] =&gt; bird [3] =&gt; monkey )</code></p><p><code>//获取hash中所有的值 顺序是随机的</code></p><p><code>$arr</code>&nbsp;<code>=&nbsp;$redis-&gt;hvals('hash');</code></p><p><code>print_r($arr);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [0] =&gt; cat1 [1] =&gt; dog [2] =&gt; bird [3] =&gt; monkey )</code></p><p><code>//获取一个hash中所有的key和value 顺序是随机的</code></p><p><code>$arr</code>&nbsp;<code>=&nbsp;$redis-&gt;hgetall('hash');</code></p><p><code>print_r($arr);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [cat] =&gt; cat1 [dog] =&gt; dog [bird] =&gt; bird [monkey] =&gt; monkey )</code></p><p><code>//获取hash中key的数量</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hlen('hash');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// 4</code></p><p><code>//删除hash中一个key 如果表不存在或key不存在则返回false</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;hdel('hash',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>var_dump($redis-&gt;hdel('hash',&nbsp;'rabbit'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// 1</code></p><p><code>// int(0)</code></p><p class="ql-align-justify"><strong>5.redis 操作 Set (集合):</strong></p><p><code>&lt;?php</code></p><p><code>//实例化redis</code></p><p><code>$redis</code>&nbsp;<code>=&nbsp;new</code>&nbsp;<code>Redis();</code></p><p><code>//连接</code></p><p><code>$redis-&gt;connect('127.0.0.1', 6379);</code></p><p><code>//集合</code></p><p><code>// 添加一个元素</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 0</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'rabbit');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'bear');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;sadd('set',&nbsp;'horse');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>// 查看集合中所有的元素</code></p><p><code>$set</code>&nbsp;<code>=&nbsp;$redis-&gt;smembers('set');</code></p><p><code>print_r($set);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; rabbit [1] =&gt; cat [2] =&gt; bear [3] =&gt; dog [4] =&gt; horse )</code></p><p><code>//删除集合中的value</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;srem('set',&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>var_dump($redis-&gt;srem('set',&nbsp;'bird'));echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// int(0)</code></p><p><code>$set</code>&nbsp;<code>=&nbsp;$redis-&gt;smembers('set');</code></p><p><code>print_r($set);echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; dog [1] =&gt; rabbit [2] =&gt; horse [3] =&gt; bear )</code></p><p><code>//判断元素是否是set的成员</code></p><p><code>var_dump($redis-&gt;sismember('set',&nbsp;'dog'));echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// bool(true)</code></p><p><code>var_dump($redis-&gt;sismember('set',&nbsp;'bird'));echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// bool(false)</code></p><p><code>//查看集合中成员的数量</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;scard('set');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 4</code></p><p><code>//移除并返回集合中的一个随机元素(返回被移除的元素)</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;spop('set');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;// bear</code></p><p><code>print_r($redis-&gt;smembers('set'));echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;</code></p><p><code>&nbsp;// Array ( [0] =&gt; dog [1] =&gt; rabbit [2] =&gt; horse )</code></p><p><code>&lt;?php</code></p><p><code>//实例化redis</code></p><p><code>$redis</code>&nbsp;<code>=&nbsp;new</code>&nbsp;<code>Redis();</code></p><p><code>//连接</code></p><p><code>$redis-&gt;connect('127.0.0.1', 6379);</code></p><p><code>//集合</code></p><p><code>$redis-&gt;sadd('set',&nbsp;'horse');</code></p><p><code>$redis-&gt;sadd('set',&nbsp;'cat');</code></p><p><code>$redis-&gt;sadd('set',&nbsp;'dog');</code></p><p><code>$redis-&gt;sadd('set',&nbsp;'bird');</code></p><p><code>$redis-&gt;sadd('set2',&nbsp;'fish');</code></p><p><code>$redis-&gt;sadd('set2',&nbsp;'dog');</code></p><p><code>$redis-&gt;sadd('set2',&nbsp;'bird');</code></p><p><code>print_r($redis-&gt;smembers('set'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [0] =&gt; cat [1] =&gt; dog [2] =&gt; bird [3] =&gt; horse )</code></p><p><code>print_r($redis-&gt;smembers('set2'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; bird [1] =&gt; dog [2] =&gt; fish )</code></p><p><code>//返回集合的交集</code></p><p><code>print_r($redis-&gt;sinter('set',&nbsp;'set2'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; dog [1] =&gt; bird )</code></p><p><code>//执行交集操作 并结果放到一个集合中</code></p><p><code>$redis-&gt;sinterstore('output',&nbsp;'set',&nbsp;'set2');</code></p><p><code>print_r($redis-&gt;smembers('output'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; dog [1] =&gt; bird )</code></p><p><code>//返回集合的并集</code></p><p><code>print_r($redis-&gt;sunion('set',&nbsp;'set2'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; cat [1] =&gt; dog [2] =&gt; bird [3] =&gt; horse [4] =&gt; fish )</code></p><p><code>//执行并集操作 并结果放到一个集合中</code></p><p><code>$redis-&gt;sunionstore('output',&nbsp;'set',&nbsp;'set2');</code></p><p><code>print_r($redis-&gt;smembers('output'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [0] =&gt; cat [1] =&gt; dog [2] =&gt; bird [3] =&gt; horse [4] =&gt; fish )</code></p><p><code>//返回集合的差集</code></p><p><code>print_r($redis-&gt;sdiff('set',&nbsp;'set2'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; horse [1] =&gt; cat )</code></p><p><code>//执行差集操作 并结果放到一个集合中</code></p><p><code>$redis-&gt;sdiffstore('output',&nbsp;'set',&nbsp;'set2');</code></p><p><code>print_r($redis-&gt;smembers('output'));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; horse [1] =&gt; cat )</code></p><p class="ql-align-justify"><strong>6.redis 操作 Sorted Set (有序集合):</strong></p><p><code>&lt;?php</code></p><p><code>//实例化redis</code></p><p><code>$redis</code>&nbsp;<code>=&nbsp;new</code>&nbsp;<code>Redis();</code></p><p><code>//连接</code></p><p><code>$redis-&gt;connect('127.0.0.1', 6379);</code></p><p><code>//有序集合</code></p><p><code>//添加元素 分数</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zadd('set', 1,&nbsp;'cat');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zadd('set', 2,&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zadd('set', 3,&nbsp;'fish');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zadd('set', 4,&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 0</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zadd('set', 4,&nbsp;'bird');echo</code>&nbsp;<code>'&lt;br&gt;';&nbsp;&nbsp;&nbsp;&nbsp;// 1</code></p><p><code>//返回集合中的所有元素</code></p><p><code>print_r($redis-&gt;zrange('set', 0, -1));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; cat [1] =&gt; fish [2] =&gt; bird [3] =&gt; dog )</code></p><p><code>print_r($redis-&gt;zrange('set', 0, -1, true));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [cat] =&gt; 1 [fish] =&gt; 3 [bird] =&gt; 4 [dog] =&gt; 4 )</code></p><p><code>//返回元素的score值</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zscore('set',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// 4</code></p><p><code>//返回存储的个数</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zcard('set');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// 4</code></p><p><code>//删除指定成员</code></p><p><code>$redis-&gt;zrem('set',&nbsp;'cat');</code></p><p><code>print_r($redis-&gt;zrange('set', 0, -1));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [0] =&gt; fish [1] =&gt; bird [2] =&gt; dog )</code></p><p><code>//返回集合中介于min和max之间的值的个数</code></p><p><code>print_r($redis-&gt;zcount('set', 3, 5));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// 3</code></p><p><code>//返回有序集合中score介于min和max之间的值</code></p><p><code>print_r($redis-&gt;zrangebyscore('set', 3, 5));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [0] =&gt; fish [1] =&gt; bird [2] =&gt; dog )</code></p><p><code>print_r($redis-&gt;zrangebyscore('set', 3, 5, ['withscores'=&gt;true]));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [fish] =&gt; 3 [bird] =&gt; 4 [dog] =&gt; 4 )</code></p><p><code>//返回集合中指定区间内所有的值 倒叙</code></p><p><code>print_r($redis-&gt;zrevrange('set', 1, 2));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [0] =&gt; bird [1] =&gt; fish )</code></p><p><code>print_r($redis-&gt;zrevrange('set', 1, 2, true));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [bird] =&gt; 4 [fish] =&gt; 3 )</code></p><p><code>//有序集合中指定值的socre增加</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zscore('set',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// 4</code></p><p><code>$redis-&gt;zincrby('set', 2,&nbsp;'dog');</code></p><p><code>echo</code>&nbsp;<code>$redis-&gt;zscore('set',&nbsp;'dog');echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// 6</code></p><p><code>//移除score值介于min和max之间的元素</code></p><p><code>print_r($redis-&gt;zrange('set', 0, -1, true));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>// Array ( [fish] =&gt; 3 [bird] =&gt; 4 [dog] =&gt; 6 )</code></p><p><code>print_r($redis-&gt;zremrangebyscore('set', 3, 4));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// 2</code></p><p><code>print_r($redis-&gt;zrange('set', 0, -1, true));echo</code>&nbsp;<code>'&lt;br&gt;';</code></p><p><code>&nbsp;// Array ( [dog] =&gt; 6 )</code></p><p><code>//结果</code></p><p><br></p>